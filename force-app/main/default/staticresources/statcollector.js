var StatCollector=function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=9)}([function(t,e,o){"use strict";var i=o(1),n=Object.prototype.toString;function r(t){return"[object Array]"===n.call(t)}function s(t){return void 0===t}function a(t){return null!==t&&"object"==typeof t}function u(t){if("[object Object]"!==n.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function c(t){return"[object Function]"===n.call(t)}function d(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),r(t))for(var o=0,i=t.length;o<i;o++)e.call(null,t[o],o,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}t.exports={isArray:r,isArrayBuffer:function(t){return"[object ArrayBuffer]"===n.call(t)},isBuffer:function(t){return null!==t&&!s(t)&&null!==t.constructor&&!s(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isPlainObject:u,isUndefined:s,isDate:function(t){return"[object Date]"===n.call(t)},isFile:function(t){return"[object File]"===n.call(t)},isBlob:function(t){return"[object Blob]"===n.call(t)},isFunction:c,isStream:function(t){return a(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:d,merge:function t(){var e={};function o(o,i){u(e[i])&&u(o)?e[i]=t(e[i],o):u(o)?e[i]=t({},o):r(o)?e[i]=o.slice():e[i]=o}for(var i=0,n=arguments.length;i<n;i++)d(arguments[i],o);return e},extend:function(t,e,o){return d(e,(function(e,n){t[n]=o&&"function"==typeof e?i(e,o):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},function(t,e,o){"use strict";t.exports=function(t,e){return function(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];return t.apply(e,o)}}},function(t,e,o){"use strict";var i=o(0);function n(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,o){if(!e)return t;var r;if(o)r=o(e);else if(i.isURLSearchParams(e))r=e.toString();else{var s=[];i.forEach(e,(function(t,e){null!=t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,(function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),s.push(n(e)+"="+n(t))})))})),r=s.join("&")}if(r){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}},function(t,e,o){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,o){"use strict";(function(e){var i=o(0),n=o(18),r={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,u={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(a=o(5)),a),transformRequest:[function(t,e){return n(e,"Accept"),n(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),i.forEach(["post","put","patch"],(function(t){u.headers[t]=i.merge(r)})),t.exports=u}).call(this,o(17))},function(t,e,o){"use strict";var i=o(0),n=o(19),r=o(21),s=o(2),a=o(22),u=o(25),c=o(26),d=o(6);t.exports=function(t){return new Promise((function(e,o){var l=t.data,p=t.headers;i.isFormData(l)&&delete p["Content-Type"],(i.isBlob(l)||i.isFile(l))&&l.type&&delete p["Content-Type"];var f=new XMLHttpRequest;if(t.auth){var h=t.auth.username||"",m=unescape(encodeURIComponent(t.auth.password))||"";p.Authorization="Basic "+btoa(h+":"+m)}var g=a(t.baseURL,t.url);if(f.open(t.method.toUpperCase(),s(g,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in f?u(f.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:i,config:t,request:f};n(e,o,r),f=null}},f.onabort=function(){f&&(o(d("Request aborted",t,"ECONNABORTED",f)),f=null)},f.onerror=function(){o(d("Network Error",t,null,f)),f=null},f.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),o(d(e,t,"ECONNABORTED",f)),f=null},i.isStandardBrowserEnv()){var S=(t.withCredentials||c(g))&&t.xsrfCookieName?r.read(t.xsrfCookieName):void 0;S&&(p[t.xsrfHeaderName]=S)}if("setRequestHeader"in f&&i.forEach(p,(function(t,e){void 0===l&&"content-type"===e.toLowerCase()?delete p[e]:f.setRequestHeader(e,t)})),i.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){f&&(f.abort(),o(t),f=null)})),l||(l=null),f.send(l)}))}},function(t,e,o){"use strict";var i=o(20);t.exports=function(t,e,o,n,r){var s=new Error(t);return i(s,e,o,n,r)}},function(t,e,o){"use strict";var i=o(0);t.exports=function(t,e){e=e||{};var o={},n=["url","method","data"],r=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function u(t,e){return i.isPlainObject(t)&&i.isPlainObject(e)?i.merge(t,e):i.isPlainObject(e)?i.merge({},e):i.isArray(e)?e.slice():e}function c(n){i.isUndefined(e[n])?i.isUndefined(t[n])||(o[n]=u(void 0,t[n])):o[n]=u(t[n],e[n])}i.forEach(n,(function(t){i.isUndefined(e[t])||(o[t]=u(void 0,e[t]))})),i.forEach(r,c),i.forEach(s,(function(n){i.isUndefined(e[n])?i.isUndefined(t[n])||(o[n]=u(void 0,t[n])):o[n]=u(void 0,e[n])})),i.forEach(a,(function(i){i in e?o[i]=u(t[i],e[i]):i in t&&(o[i]=u(void 0,t[i]))}));var d=n.concat(r).concat(s).concat(a),l=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===d.indexOf(t)}));return i.forEach(l,c),o}},function(t,e,o){"use strict";function i(t){this.message=t}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StatCollector=void 0;const i=o(10),n=o(11).default;e.StatCollector=class{constructor(t,e){this.apiEndpoint=t,this.debug=null!=e&&e,this.getMediaDevices()}sendDataToApi(t,e){n({method:"post",url:`${this.apiEndpoint}/${e}`,data:t,crossDomain:!0}).then((function(t){console.log("[StatCollector] API Response: "+t)})).catch((function(t){console.log("[StatCollector] API Error: "+t)}))}createRealtimeStats(t){if(this.debug&&console.log("[StatCollector] Creating realtime stats: "+t),this.currentStats){this.previousStats=this.currentStats,this.currentStats=this.setRealtimeStatsToObject(t);let e={contactId:this.currentStats.contactId,audioInputTimestamp:this.currentStats.audioInputTimestamp,audioInputPacketsLost:this.currentStats.audioInputPacketsLost-this.previousStats.audioInputPacketsLost,audioInputPacketsCount:this.currentStats.audioInputPacketsCount-this.previousStats.audioInputPacketsCount,audioInputAudioLevel:this.currentStats.audioInputAudioLevel,audioInputRttMilliseconds:this.currentStats.audioInputRttMilliseconds,audioInputJbMilliseconds:this.currentStats.audioInputJbMilliseconds,audioInputProcMilliseconds:this.currentStats.audioInputProcMilliseconds,audioInputBytesSent:this.currentStats.audioInputBytesSent-this.previousStats.audioInputBytesSent,audioInputBytesReceived:this.currentStats.audioInputBytesReceived-this.previousStats.audioInputBytesReceived,audioInputFramesEncoded:this.currentStats.audioInputFramesEncoded-this.previousStats.audioInputFramesEncoded,audioInputFramesDecoded:this.currentStats.audioInputFramesDecoded-this.previousStats.audioInputFramesDecoded,audioInputFrameRateSent:this.currentStats.audioInputFrameRateSent-this.previousStats.audioInputFrameRateSent,audioInputFrameRateReceived:this.currentStats.audioInputFrameRateReceived-this.previousStats.audioInputFrameRateReceived,audioInputStatsReportType:this.currentStats.audioInputStatsReportType,audioInputStreamType:this.currentStats.audioInputStreamType,audioOutputTimestamp:this.currentStats.audioOutputTimestamp,audioOutputPacketsLost:this.currentStats.audioOutputPacketsLost-this.previousStats.audioOutputPacketsLost,audioOutputPacketsCount:this.currentStats.audioOutputPacketsCount-this.previousStats.audioOutputPacketsCount,audioOutputAudioLevel:this.currentStats.audioOutputAudioLevel,audioOutputRttMilliseconds:this.currentStats.audioOutputRttMilliseconds,audioOutputJbMilliseconds:this.currentStats.audioOutputJbMilliseconds,audioOutputProcMilliseconds:this.currentStats.audioOutputProcMilliseconds,audioOutputBytesSent:this.currentStats.audioOutputBytesSent-this.previousStats.audioOutputBytesSent,audioOutputBytesReceived:this.currentStats.audioOutputBytesReceived-this.previousStats.audioOutputBytesReceived,audioOutputFramesEncoded:this.currentStats.audioOutputFramesEncoded-this.previousStats.audioOutputFramesEncoded,audioOutputFramesDecoded:this.currentStats.audioOutputFramesDecoded-this.previousStats.audioOutputFramesDecoded,audioOutputFrameRateSent:this.currentStats.audioOutputFrameRateSent-this.previousStats.audioOutputFrameRateSent,audioOutputFrameRateReceived:this.currentStats.audioOutputFrameRateReceived-this.previousStats.audioOutputFrameRateReceived,audioOutputStatsReportType:this.currentStats.audioOutputStatsReportType,audioOutputStreamType:this.currentStats.audioOutputStreamType},o=this.getPacketLoss(e.audioOutputPacketsCount,e.audioOutputPacketsLost);e.eMosScore=this.getEMosScore(e.audioOutputJbMilliseconds,e.audioOutputRttMilliseconds,o);let i=this.getTimeDifference(this.currentStats.audioOutputTimestamp,this.previousStats.audioOutputTimestamp),n=this.getBitRate(e.audioInputBytesReceived,i);e.bitRate=n,this.sendDataToApi(e,"realtime")}else{this.currentStats=this.setRealtimeStatsToObject(t);try{this.sendDataToApi(this.currentStats,"realtime")}catch(t){console.log(t)}this.previousStats=this.currentStats}}setRealtimeStatsToObject(t){return this.debug&&console.log("[StatCollector] Setting Realtime Stats: "+t),{contactId:this.pc._callId,audioInputTimestamp:t.audio.input[0]._timestamp,audioInputPacketsLost:Number(t.audio.input[0]._packetsLost),audioInputPacketsCount:Number(t.audio.input[0]._packetsCount),audioInputAudioLevel:Number(t.audio.input[0]._audioLevel),audioInputRttMilliseconds:Number(t.audio.input[0]._rttMilliseconds),audioInputJbMilliseconds:Number(t.audio.input[0]._jbMilliseconds),audioInputProcMilliseconds:Number(t.audio.input[0]._procMilliseconds),audioInputBytesSent:Number(t.audio.input[0]._bytesSent),audioInputBytesReceived:Number(t.audio.input[0]._bytesReceived),audioInputFramesEncoded:Number(t.audio.input[0]._framesEncoded),audioInputFramesDecoded:Number(t.audio.input[0]._framesDecoded),audioInputFrameRateSent:Number(t.audio.input[0]._frameRateSent),audioInputFrameRateReceived:Number(t.audio.input[0]._frameRateReceived),audioInputStatsReportType:t.audio.input[0]._statsReportType,audioInputStreamType:t.audio.input[0]._streamType,audioOutputTimestamp:t.audio.output[0]._timestamp,audioOutputPacketsLost:Number(t.audio.output[0]._packetsLost),audioOutputPacketsCount:Number(t.audio.output[0]._packetsCount),audioOutputAudioLevel:Number(t.audio.output[0]._audioLevel),audioOutputRttMilliseconds:Number(t.audio.output[0]._rttMilliseconds),audioOutputJbMilliseconds:Number(t.audio.output[0]._jbMilliseconds),audioOutputProcMilliseconds:Number(t.audio.input[0]._procMilliseconds),audioOutputBytesSent:Number(t.audio.output[0]._bytesSent),audioOutputBytesReceived:Number(t.audio.output[0]._bytesReceived),audioOutputFramesEncoded:Number(t.audio.output[0]._framesEncoded),audioOutputFramesDecoded:Number(t.audio.output[0]._framesDecoded),audioOutputFrameRateSent:Number(t.audio.output[0]._frameRateSent),audioOutputFrameRateReceived:Number(t.audio.output[0]._frameRateReceived),audioOutputStatsReportType:t.audio.output[0]._statsReportType,audioOutputStreamType:t.audio.output[0]._streamType}}createSessionStatsReport(t,e){this.debug&&console.log("[StatCollector] Creating Final Session report: "+e);let o=this.setSessionStatsToObject(e);this.debug&&console.log("[StatCollector] Final session report: "+o),this.sendDataToApi(o,"session")}setSessionStatsToObject(t){this.debug&&console.log("[StatCollector] Setting Session stats to Session Report object");let e=this.contact.getAgentConnection().getSoftphoneMediaInfo();this.debug&&console.log("[StatCollector] Phone info: ",JSON.parse(e.callConfigJson));let o=new Date(t._sessionEndTime).getTime()-new Date(t._sessionStartTime).getTime(),i={audioDevice:this.getDefaultMediaDevice(),duration:o,contactId:this.pc._callId,sessionStartTime:t._sessionStartTime,sessionEndTime:t._sessionEndTime,gumTimeMillis:Number(t._gumTimeMillis),initializationTimeMillis:Number(t._initializationTimeMillis),iceCollectionTimeMillis:Number(t._iceCollectionTimeMillis),signallingConnectTimeMillis:Number(t.signallingConnectTimeMillis),handshakingTimeMillis:Number(t._handshakingTimeMillis),preTalkingTimeMillis:Number(t._preTalkingTimeMillis),talkingTimeMillis:Number(t._talkingTimeMillis),iceConnectionsLost:Number(t._iceConnectionsLost),cleanupTimeMillis:Number(t._cleanupTimeMillis),iceCollectionFailure:0==Boolean(t._iceCollectionFailure)?0:1,signallingConnectionFailure:0==Boolean(t._signallingConnectionFailure)?0:1,handshakingFailure:0==Boolean(t._handshakingFailure)?0:1,gumOtherFailure:0==Boolean(t._gumOtherFailure)?0:1,gumTimeoutFailure:0==Boolean(t._gumTimeoutFailure)?0:1,createOfferFailure:0==Boolean(t._createOfferFailure)?0:1,setLocalDescriptionFailure:0==Boolean(t._setLocalDescriptionFailure)?0:1,userBusyFailure:0==Boolean(t._userBusyFailure)?0:1,invalidRemoteSDPFailure:0==Boolean(t._invalidRemoteSDPFailure)?0:1,noRemoteIceCandidateFailure:0==Boolean(t._noRemoteIceCandidateFailure)?0:1,setRemoteDescriptionFailure:0==Boolean(t._setRemoteDescriptionFailure)?0:1,audioInputSoftphoneStreamType:t._streamStats[0].softphoneStreamType,audioInputTimestamp:t._streamStats[0].timestamp,audioInputPacketsLost:Number(t._streamStats[0].packetsLost),audioInputPacketsCount:Number(t._streamStats[0].packetsCount),audioInputAudioLevel:Number(t._streamStats[0].audioLevel),audioInputJitterBufferMillis:t._streamStats[0].jitterBufferMillis,audioInputRoundTripTimeMillis:t._streamStats[0].roundTripTimeMillis,audioOutputSoftphoneStreamType:t._streamStats[1].softphoneStreamType,audioOutputtimestamp:t._streamStats[1].timestamp,audioOutputPacketsLost:Number(t._streamStats[1].packetsLost),audioOutputPacketsCount:Number(t._streamStats[1].packetsCount),audioOutputAudioLevel:Number(t._streamStats[1].audioLevel),audioOutputJitterBufferMillis:t._streamStats[1].jitterBufferMillis,audioOutputRoundTripTimeMillis:t._streamStats[1].roundTripTimeMillis},n=this.getPacketLoss(i.audioOutputPacketsCount,i.audioOutputPacketsLost);if(i.eMosScore=this.getEMosScore(i.audioInputJitterBufferMillis,i.audioInputRoundTripTimeMillis,n),this.feedback&&(i.feedbackQuality=this.feedback.rating,this.feedback.message.forEach(t=>{i.feedbackMessage+=t+"\n"})),e.callConfigJson){let t=JSON.parse(e.callConfigJson);console.log(t),i.protocol=t.protocol,i.signalingEndpoint=t.signalingEndpoint;for(let e=0;e<t.iceServers.length;e++)i["iceServer"+(e+1)]=t.iceServers[e].urls[0]}return i.browser=this.getBrowser(),i.platform=this.getPlatform(),i}getIPLocation(t){}setFeedback(t,e){this.feedback||(this.feedback={rating:"unrated",message:[]});let o=null!=e?e:"no feedback";this.feedback.rating=null!=t?t:this.feedback.rating,this.feedback.message.push(o)}setFeedbackRating(t){this.feedback.rating=null!=t?t:"unrated"}setFeedbackMessage(t){this.feedback.message.push(t)}clearFeedback(){this.feedback={rating:"unrated",message:[]}}getEMosScore(t,e,o){let i,n;t||(t=0),e||(e=0),o||(o=0);let r=e+2*t+10;return n=r<160?93.2-.025*r:93.2-.1*(r-120),n-=2.5*o,i=1+.035*n+7e-6*n*(n-60)*(100-n),Math.round(100*i)/100}getPacketLoss(t,e){return t>0?1-e/t:0}getBitRate(t,e){let o=8*t/e;return Math.round(100*o)/100}setStatCollectionInterval(t){(void 0===t||t<1e3)&&(t=1e3),t>3e4&&(t=3e4),this.statCollectionInterval=t}getStatCollectionInterval(){return this.statCollectionInterval}sendSoftphoneError(t){this.debug&&console.log("[StatCollector] Send Softphone Error: ",t);let e,o="agent-undefined";this.agent&&(o=this.agent.getConfiguration().username),e=this.contact?this.contact.getContactId():`${o}-${Date.now()}`;let n={agentUsername:o,contactId:e,definition:i.SOFTPHONE_ERROR_DEFINITIONS[t],error:t,timestamp:(new Date).toISOString()};this.sendDataToApi(n,"ccp-error")}getBrowser(){let t,e,o,i=navigator.userAgent,n=navigator.appName,r=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10);return-1!=(e=i.indexOf("OPR/"))?(n="Opera",r=i.substring(e+4)):-1!=(e=i.indexOf("Opera"))?(n="Opera",r=i.substring(e+6),-1!=(e=i.indexOf("Version"))&&(r=i.substring(e+8))):-1!=(e=i.indexOf("MSIE"))?(n="Microsoft Internet Explorer",r=i.substring(e+5)):-1!=(e=i.indexOf("Chrome"))?(n="Chrome",r=i.substring(e+7)):-1!=(e=i.indexOf("Safari"))?(n="Safari",r=i.substring(e+7),-1!=(e=i.indexOf("Version"))&&(r=i.substring(e+8))):-1!=(e=i.indexOf("Firefox"))?(n="Firefox",r=i.substring(e+8)):(t=i.lastIndexOf(" ")+1)<(e=i.lastIndexOf("/"))&&(n=i.substring(t,e),r=i.substring(e+1),n.toLowerCase()==n.toUpperCase()&&(n=navigator.appName)),-1!=(o=r.indexOf(";"))&&(r=r.substring(0,o)),-1!=(o=r.indexOf(" "))&&(r=r.substring(0,o)),s=parseInt(""+r,10),isNaN(s)&&(r=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10)),console.log(n+" "+r),n+" "+r}getPlatform(){let t="Unknown";return-1!=window.navigator.userAgent.indexOf("Windows NT 10.0")&&(t="Windows 10"),-1!=window.navigator.userAgent.indexOf("Windows NT 6.2")&&(t="Windows 8"),-1!=window.navigator.userAgent.indexOf("Windows NT 6.1")&&(t="Windows 7"),-1!=window.navigator.userAgent.indexOf("Windows NT 6.0")&&(t="Windows Vista"),-1!=window.navigator.userAgent.indexOf("Windows NT 5.1")&&(t="Windows XP"),-1!=window.navigator.userAgent.indexOf("Windows NT 5.0")&&(t="Windows 2000"),-1!=window.navigator.userAgent.indexOf("Mac")&&(t="Mac/iOS"),-1!=window.navigator.userAgent.indexOf("X11")&&(t="UNIX"),-1!=window.navigator.userAgent.indexOf("Linux")&&(t="Linux"),t}async getMediaDevices(){this.mediaDevices=await navigator.mediaDevices.enumerateDevices(),this.audioDevices=this.mediaDevices.filter(t=>"audiooutput"===t.kind),this.debug&&console.log("[StatCollector] Audio Devices: ",this.audioDevices)}getDefaultMediaDevice(){let t;return this.audioDevices.forEach(e=>{"default"===e.deviceId&&(t=e.label)}),this.debug&&console.log("[StatCollector] Default Media Device: ",t),t}setDebug(t){this.debug=t}getTimeDifference(t,e){return Date.parse(t)-Date.parse(e)}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SOFTPHONE_ERROR_DEFINITIONS=e.SOFTPHONE_ERRORS=void 0,e.SOFTPHONE_ERRORS=["unsupported_browser","microphone_not_shared","signalling_handshake_failure","signalling_connection_failure","ice_collection_timeout","user_busy_error","webrtc_error","realtime_communication_error"],e.SOFTPHONE_ERROR_DEFINITIONS={unsupported_browser:"Agent is using an unsupported browser. Only the latest 3 versions of Chrome or Firefox is supported. Upgrade the agent's browser to resolve this error. See Supported browsers for more information.",microphone_not_shared:"The microphone does not have permission for the site on which the CCP is running. For Google Chrome steps, see Use your camera and microphone in Chrome. For Mozilla Firefox steps, see Firefox Page Info window.",signalling_handshake_failure:"Error connecting the CCP to the telephony system. To resolve, try the action again, or wait a minute and then retry. If the issue persists, contact support.",signalling_connection_failure:"Internal connection error occurred. To resolve, try the action again, or wait a minute and then retry. If the issue persists, contact support.",ice_collection_timeout:"Error connecting to the media service. To resolve, try the action again, or wait a minute and then retry. If the issue persists, contact support.",user_busy_error:"Agent has the CCP running in 2 distinct browsers at the same time, such as Chrome and Firefox. Use only one browser at a time to log in to the CCP.",webrtc_error:"An issue occurred due to either using an unsupported browser, or a required port/protocol is not open, such as not allowing UDP on port 443. To resolve, confirm that the agent is using a supported browser, and that all traffic is allowed for all required ports and protocols. See CCP Networking and Phone Settings for more information.",realtime_communication_error:"An internal communication error occurred."}},function(t,e,o){t.exports=o(12)},function(t,e,o){"use strict";var i=o(0),n=o(1),r=o(13),s=o(7);function a(t){var e=new r(t),o=n(r.prototype.request,e);return i.extend(o,r.prototype,e),i.extend(o,e),o}var u=a(o(4));u.Axios=r,u.create=function(t){return a(s(u.defaults,t))},u.Cancel=o(8),u.CancelToken=o(27),u.isCancel=o(3),u.all=function(t){return Promise.all(t)},u.spread=o(28),t.exports=u,t.exports.default=u},function(t,e,o){"use strict";var i=o(0),n=o(2),r=o(14),s=o(15),a=o(7);function u(t){this.defaults=t,this.interceptors={request:new r,response:new r}}u.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[s,void 0],o=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)o=o.then(e.shift(),e.shift());return o},u.prototype.getUri=function(t){return t=a(this.defaults,t),n(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(t){u.prototype[t]=function(e,o){return this.request(a(o||{},{method:t,url:e}))}})),i.forEach(["post","put","patch"],(function(t){u.prototype[t]=function(e,o,i){return this.request(a(i||{},{method:t,url:e,data:o}))}})),t.exports=u},function(t,e,o){"use strict";var i=o(0);function n(){this.handlers=[]}n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){i.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=n},function(t,e,o){"use strict";var i=o(0),n=o(16),r=o(3),s=o(4);function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return a(t),t.headers=t.headers||{},t.data=n(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return a(t),e.data=n(e.data,e.headers,t.transformResponse),e}),(function(e){return r(e)||(a(t),e&&e.response&&(e.response.data=n(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,o){"use strict";var i=o(0);t.exports=function(t,e,o){return i.forEach(o,(function(o){t=o(t,e)})),t}},function(t,e){var o,i,n=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(o===setTimeout)return setTimeout(t,0);if((o===r||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:r}catch(t){o=r}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,c=[],d=!1,l=-1;function p(){d&&u&&(d=!1,u.length?c=u.concat(c):l=-1,c.length&&f())}function f(){if(!d){var t=a(p);d=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,d=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function m(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];c.push(new h(t,e)),1!==c.length||d||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,o){"use strict";var i=o(0);t.exports=function(t,e){i.forEach(t,(function(o,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=o,delete t[i])}))}},function(t,e,o){"use strict";var i=o(6);t.exports=function(t,e,o){var n=o.config.validateStatus;o.status&&n&&!n(o.status)?e(i("Request failed with status code "+o.status,o.config,null,o.request,o)):t(o)}},function(t,e,o){"use strict";t.exports=function(t,e,o,i,n){return t.config=e,o&&(t.code=o),t.request=i,t.response=n,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,o){"use strict";var i=o(0);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,o,n,r,s){var a=[];a.push(t+"="+encodeURIComponent(e)),i.isNumber(o)&&a.push("expires="+new Date(o).toGMTString()),i.isString(n)&&a.push("path="+n),i.isString(r)&&a.push("domain="+r),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,o){"use strict";var i=o(23),n=o(24);t.exports=function(t,e){return t&&!i(e)?n(t,e):e}},function(t,e,o){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,o){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,o){"use strict";var i=o(0),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,o,r,s={};return t?(i.forEach(t.split("\n"),(function(t){if(r=t.indexOf(":"),e=i.trim(t.substr(0,r)).toLowerCase(),o=i.trim(t.substr(r+1)),e){if(s[e]&&n.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([o]):s[e]?s[e]+", "+o:o}})),s):s}},function(t,e,o){"use strict";var i=o(0);t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function n(t){var i=t;return e&&(o.setAttribute("href",i),i=o.href),o.setAttribute("href",i),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return t=n(window.location.href),function(e){var o=i.isString(e)?n(e):e;return o.protocol===t.protocol&&o.host===t.host}}():function(){return!0}},function(t,e,o){"use strict";var i=o(8);function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var o=this;t((function(t){o.reason||(o.reason=new i(t),e(o.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t;return{token:new n((function(e){t=e})),cancel:t}},t.exports=n},function(t,e,o){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}}]);
